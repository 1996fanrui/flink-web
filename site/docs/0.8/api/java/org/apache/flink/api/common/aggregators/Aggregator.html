<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Fri Feb 20 12:21:53 CET 2015 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>Aggregator (Apache Flink 0.8-SNAPSHOT API)</title>
<meta name="date" content="2015-02-20">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Aggregator (Apache Flink 0.8-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Aggregator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><em><a href=/docs/0.8/ target=_top><h1>Back to Flink Documentation</h1></a></em></div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../../../org/apache/flink/api/common/aggregators/AggregatorRegistry.html" title="class in org.apache.flink.api.common.aggregators"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/flink/api/common/aggregators/Aggregator.html" target="_top">Frames</a></li>
<li><a href="Aggregator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.flink.api.common.aggregators</div>
<h2 title="Interface Aggregator" class="title">Interface Aggregator&lt;T extends <a href="../../../../../../org/apache/flink/types/Value.html" title="interface in org.apache.flink.types">Value</a>&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl><dt><span class="strong">Type Parameters:</span></dt><dd><code>T</code> - The type of the aggregated value.</dd></dl>
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</a></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../../../org/apache/flink/api/common/operators/base/BulkIterationBase.TerminationCriterionAggregator.html" title="class in org.apache.flink.api.common.operators.base">BulkIterationBase.TerminationCriterionAggregator</a>, <a href="../../../../../../org/apache/flink/api/common/aggregators/DoubleSumAggregator.html" title="class in org.apache.flink.api.common.aggregators">DoubleSumAggregator</a>, <a href="../../../../../../org/apache/flink/api/common/aggregators/LongSumAggregator.html" title="class in org.apache.flink.api.common.aggregators">LongSumAggregator</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">Aggregator&lt;T extends <a href="../../../../../../org/apache/flink/types/Value.html" title="interface in org.apache.flink.types">Value</a>&gt;</span>
extends <a href="http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</a></pre>
<div class="block">Aggregators are a means of aggregating values across parallel instances of a function. Aggregators  
 collect simple statistics (such as the number of processed elements) about the actual work performed in a function.
 Aggregators are specific to iterations and are commonly used to check the convergence of an iteration by using a
 <a href="../../../../../../org/apache/flink/api/common/aggregators/ConvergenceCriterion.html" title="interface in org.apache.flink.api.common.aggregators"><code>ConvergenceCriterion</code></a>. In contrast to the <a href="../../../../../../org/apache/flink/api/common/accumulators/Accumulator.html" title="interface in org.apache.flink.api.common.accumulators"><code>Accumulator</code></a> (whose result is available at the end of a job,
 the aggregators are computed once per iteration superstep. Their value can be used to check for convergence (at the end
 of the iteration superstep) and it can be accessed in the next iteration superstep.
 <p>
 Aggregators must be registered at the iteration inside which they are used via the function. In the Java API, the
 method is "IterativeDataSet.registerAggregator(...)" or "IterativeDataSet.registerAggregationConvergenceCriterion(...)"
 when using the aggregator together with a convergence criterion. Aggregators are always registered under a name. That
 name can be used to access the aggregator at runtime from within a function. The following code snippet shows a typical
 case. Here, it count across all parallel instances how many elements are filtered out by a function.
 
 <pre>
 // the user-defined function 
 public class MyFilter extends FilterFunction&lt;Double&gt; {
     private LongSumAggregator agg;
     
     public void open(Configuration parameters) {
         agg = getIterationRuntimeContext().getIterationAggregator("numFiltered");
     }
     
     public boolean filter (Double value) {
         if (value > 1000000.0) {
             agg.aggregate(1);
             return false
         }
         
         return true;
     }
 }
 
 // the iteration where the aggregator is registered
 IterativeDataSet&lt;Double&gt; iteration = input.iterate(100).registerAggregator("numFiltered", LongSumAggregator.class);
 ...
 DataSet&lt;Double&gt; filtered = someIntermediateResult.filter(new MyFilter);
 ...
 DataSet&lt;Double&gt; result = iteration.closeWith(filtered);
 ...
 </pre>
 
 <p>
 Aggregators must be <i>distributive</i>: An aggregator must be able to pre-aggregate values and it must be able
 to aggregate these pre-aggregated values to form the final aggregate. Many aggregation functions fulfill this
 condition (sum, min, max) and others can be brought into that form: One can expressing <i>count</i> as a sum over
 values of one, and one can express <i>average</i> through a sum and a count.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/flink/api/common/aggregators/Aggregator.html#aggregate(T)">aggregate</a></strong>(<a href="../../../../../../org/apache/flink/api/common/aggregators/Aggregator.html" title="type parameter in Aggregator">T</a>&nbsp;element)</code>
<div class="block">Aggregates the given element.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/flink/api/common/aggregators/Aggregator.html" title="type parameter in Aggregator">T</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/flink/api/common/aggregators/Aggregator.html#getAggregate()">getAggregate</a></strong>()</code>
<div class="block">Gets the aggregator's current aggregate.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/flink/api/common/aggregators/Aggregator.html#reset()">reset</a></strong>()</code>
<div class="block">Resets the internal state of the aggregator.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getAggregate()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAggregate</h4>
<pre><a href="../../../../../../org/apache/flink/api/common/aggregators/Aggregator.html" title="type parameter in Aggregator">T</a>&nbsp;getAggregate()</pre>
<div class="block">Gets the aggregator's current aggregate.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The aggregator's current aggregate.</dd></dl>
</li>
</ul>
<a name="aggregate(org.apache.flink.types.Value)">
<!--   -->
</a><a name="aggregate(T)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>aggregate</h4>
<pre>void&nbsp;aggregate(<a href="../../../../../../org/apache/flink/api/common/aggregators/Aggregator.html" title="type parameter in Aggregator">T</a>&nbsp;element)</pre>
<div class="block">Aggregates the given element. In the case of a <i>sum</i> aggregator, this method adds the given
 value to the sum.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>element</code> - The element to aggregate.</dd></dl>
</li>
</ul>
<a name="reset()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>reset</h4>
<pre>void&nbsp;reset()</pre>
<div class="block">Resets the internal state of the aggregator. This must bring the aggregator into the same
 state as if it was newly initialized.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Aggregator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><em><a href=/docs/0.8/ target=_top><h1>Back to Flink Documentation</h1></a></em></div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../../../org/apache/flink/api/common/aggregators/AggregatorRegistry.html" title="class in org.apache.flink.api.common.aggregators"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/flink/api/common/aggregators/Aggregator.html" target="_top">Frames</a></li>
<li><a href="Aggregator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2015 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
